+HashMap

Node = HashMap int -> Node

CheckerIfPossiblyEncoded = : secrets
	roots = Node
	for secrets: s
		n = var roots[s.length :Node]
		for s.substr(1): c
			offs = s.substr(0 i+1).find(c)
			n := n[offs Node]

	: text 	 ; time complexity = O(text.length)
		seen = HashMap int -> int
		n = var roots[text.length]
		if text.length < 1:
			^ n.isEmpty
		seen.add text[0] -> 0
		for 1 ~ text.length: i
			if n.isEmpty:
				^ false
			c = text[i]
			ofs = seen[c] || i
			n := n[ofs]
			if ofs == i && !seen.put(c->i):
				^ false
		true

c = CheckerIfPossiblyEncoded ["bananas" "been" "trenton"]

assert true  c("nsmsmsd")  ;//bananas
assert false c("nsms")
assert true  c("xaav"); //been
assert true  c("rewbrib"); //trenton	
echo "ok"
