+HashMap

Node = HashMap int -> Node

CheckerIfPossiblyEncoded = : secrets
	roots = Node
	for secrets: s
		n = ref roots[s.length :Node]
		for 0 ~ s.length: i
			offs = s.substr(0 i+1).find(s[i])
			n := n[offs :Node]

	: text 	 ; time complexity = O(text.length)
		seen = HashMap int -> int
		n = ref roots[text.length]
		for 0 ~ text.length: i
			if !n:
				^ false
			ofs = seen[text[i]] || i
			n := n[ofs]
			if ofs == i && !seen.add(text[i] -> i):
				^ false
		true

c = CheckerIfPossiblyEncoded ["bananas" "been" "trenton"]

assert true  c("nsmsmsd")  ;//bananas
assert false c("nsms")
assert true  c("xaav"); //been
assert true  c("rewbrib"); //trenton	
echo "ok"
